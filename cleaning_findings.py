import os
import time

# Function to clean the files
def clean_files(folder_path):
    for root, _, files in os.walk(folder_path):
        for filename in files:
            file_path = os.path.join(root, filename)
            if os.path.isfile(file_path):
                with open(file_path, "r", encoding="utf-8") as file:
                    content = file.read()
                    if content.startswith("<!DOCTYPE html>") or content.startswith("\n<!DOCTYPE html>"):
                        # Close the file after reading its content
                        file.close()

                        # Add a delay before attempting to delete
                        time.sleep(0.3)  # Adjust the duration as needed

                        try:
                            os.remove(file_path)
                            print(f"Deleted: {file_path}")
                        except Exception as e:
                            print(f"Error deleting {file_path}: {e}")
                    else:
                        print(f"Skipped: {file_path}")
foundings_folder_path = "C:/Users/aymen/Desktop/foundings"

# Clean the files in the "foundings" directory and its subfolders
clean_files(foundings_folder_path)
