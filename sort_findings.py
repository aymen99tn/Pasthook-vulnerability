import os
import shutil

def sort_files_by_keywords(folder_path, keywords):
    other_files = []

    for root, _, files in os.walk(folder_path):
        for filename in files:
            file_path = os.path.join(root, filename)
            if os.path.isfile(file_path):
                matched = False
                for keyword in keywords:
                    if keyword.lower() in filename.lower():
                        keyword_folder = os.path.join(folder_path, keyword)
                        os.makedirs(keyword_folder, exist_ok=True)
                        new_file_path = os.path.join(keyword_folder, filename)
                        shutil.move(file_path, new_file_path)
                        matched = True
                        break

                if not matched:
                    other_files.append(file_path)

    # Create "others" folder if there are remaining files
    others_folder = os.path.join(folder_path, "others")
    os.makedirs(others_folder, exist_ok=True)

    # Move remaining files to "others" folder
    for file_path in other_files:
        new_file_path = os.path.join(others_folder, os.path.basename(file_path))
        shutil.move(file_path, new_file_path)

def clean_empty_folders(folder_path):
    for root, dirs, _ in os.walk(folder_path, topdown=False):
        for dir_name in dirs:
            dir_path = os.path.join(root, dir_name)
            if not os.listdir(dir_path):
                os.rmdir(dir_path)

def main():
    # Specify the folder path where the files are located
    files_folder_path = "C:/Users/aymen/Desktop/foundings"

    # List of keywords for sorting
    keywords = ["netflix", "google", "microsoft","crunchyrol","untitled","vpn","porno","spotify","lifeselector","proxy","proxies","pornhub","brazzers","disney","viki","mega.nz","paypal""visa","mastercard","fiver","tiktok","facebook","steam","epicgames","valorant","twitter","instagram","hulu","deezer","hbo","ids"]  # Add more keywords as needed

    # Sort files based on keywords
    sort_files_by_keywords(files_folder_path, keywords)

    # Clean empty folders
    clean_empty_folders(files_folder_path)

if __name__ == "__main__":
    main()
